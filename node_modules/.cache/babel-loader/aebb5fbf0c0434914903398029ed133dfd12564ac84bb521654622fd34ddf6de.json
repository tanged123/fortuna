{"ast":null,"code":"import React,{useState,useMemo,useRef,useCallback}from'react';import{formatCurrency}from'../utils/csvParser';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SankeyChart=_ref=>{let{data}=_ref;const[hoveredNode,setHoveredNode]=useState(null);const[hoveredLink,setHoveredLink]=useState(null);const[zoom,setZoom]=useState(1);const[pan,setPan]=useState({x:0,y:0});const[isDragging,setIsDragging]=useState(false);const[dragStart,setDragStart]=useState({x:0,y:0});const svgRef=useRef(null);// Generate Sankey data from financial data\nconst sankeyData=useMemo(()=>{const nodes=[];const links=[];// Define colors for different categories\nconst colors={income:'#10B981',// Green\nsavings:'#3B82F6',// Blue\nrent:'#EF4444',// Red\nutilities:'#F59E0B',// Orange\ngroceries:'#8B5CF6',// Purple\nrestaurants:'#EC4899',// Pink\ngas:'#6B7280',// Gray\nmedical:'#F97316',// Orange\ngym:'#84CC16',// Lime\ntravel:'#06B6D4',// Cyan\nshopping:'#F43F5E',// Rose\nentertainment:'#A855F7',// Violet\nmiscellaneous:'#64748B'// Slate\n};// Add income node\nnodes.push({id:'income',name:'Monthly Income',value:data.monthlyNetIncome,color:colors.income});// Add expense nodes and links\ndata.expenses.forEach((expense,index)=>{const nodeId=\"expense-\".concat(index);const categoryKey=expense.category.toLowerCase().replace(/[^a-z]/g,'');nodes.push({id:nodeId,name:expense.category,value:expense.amount,color:colors[categoryKey]||colors.miscellaneous});links.push({source:'income',target:nodeId,value:expense.amount,color:colors[categoryKey]||colors.miscellaneous});});// Add savings node and link\nif(data.savings>0){nodes.push({id:'savings',name:'Savings',value:data.savings,color:colors.savings});links.push({source:'income',target:'savings',value:data.savings,color:colors.savings});}return{nodes,links};},[data]);// Calculate layout dimensions - make responsive\nconst containerWidth=900;const nodeWidth=25;const nodeSpacing=15;// Calculate proportional scaling - income bar should equal sum of all outgoing flows\nconst totalOutgoing=data.expenses.reduce((sum,expense)=>sum+expense.amount,0)+data.savings;const maxAmount=Math.max(data.monthlyNetIncome,totalOutgoing);const minNodeHeight=20;const maxNodeHeight=80;const scaleFactor=(maxNodeHeight-minNodeHeight)/maxAmount;// Calculate dynamic height based on proportional node sizes\nconst rightNodesCount=sankeyData.nodes.filter(node=>node.id!=='income').length;const totalNodeHeights=sankeyData.nodes.reduce((sum,node)=>{const proportionalHeight=Math.max(minNodeHeight,node.value*scaleFactor);return sum+proportionalHeight;},0);const totalSpacing=(rightNodesCount-1)*nodeSpacing;const calculatedHeight=Math.max(400,totalNodeHeights+totalSpacing+100);const containerHeight=calculatedHeight;// Calculate node positions\nconst calculateLayout=()=>{const leftNodes=sankeyData.nodes.filter(node=>node.id==='income');const rightNodes=sankeyData.nodes.filter(node=>node.id!=='income');// Position income node on the left - height should equal total outgoing flows\nleftNodes.forEach((node,index)=>{// Income bar height should equal the sum of all outgoing flows, not the income amount\nconst incomeBarHeight=Math.max(minNodeHeight,totalOutgoing*scaleFactor);node.x=80;node.y=containerHeight/2-incomeBarHeight/2;node.width=nodeWidth;node.height=incomeBarHeight;});// Position expense/savings nodes on the right with proportional heights\nconst totalRightNodesHeight=rightNodes.reduce((sum,node)=>{const proportionalHeight=Math.max(minNodeHeight,node.value*scaleFactor);return sum+proportionalHeight;},0);const totalSpacing=(rightNodes.length-1)*nodeSpacing;const startY=Math.max(50,(containerHeight-totalRightNodesHeight-totalSpacing)/2);let currentY=startY;rightNodes.forEach(node=>{const proportionalHeight=Math.max(minNodeHeight,node.value*scaleFactor);node.x=containerWidth-180;node.y=currentY;node.width=nodeWidth;node.height=proportionalHeight;currentY+=node.height+nodeSpacing;});};calculateLayout();// Pan and zoom handlers\nconst handleWheel=useCallback(e=>{e.preventDefault();const delta=e.deltaY>0?0.9:1.1;const newZoom=Math.max(0.1,Math.min(3,zoom*delta));setZoom(newZoom);},[zoom]);const handleMouseDown=useCallback(e=>{if(e.button===0){// Left mouse button\nsetIsDragging(true);setDragStart({x:e.clientX-pan.x,y:e.clientY-pan.y});}},[pan]);const handleMouseMove=useCallback(e=>{if(isDragging){setPan({x:e.clientX-dragStart.x,y:e.clientY-dragStart.y});}},[isDragging,dragStart]);const handleMouseUp=useCallback(()=>{setIsDragging(false);},[]);const resetView=useCallback(()=>{setZoom(1);setPan({x:0,y:0});},[]);// Touch support for mobile\nconst handleTouchStart=useCallback(e=>{if(e.touches.length===1){const touch=e.touches[0];setIsDragging(true);setDragStart({x:touch.clientX-pan.x,y:touch.clientY-pan.y});}},[pan]);const handleTouchMove=useCallback(e=>{if(isDragging&&e.touches.length===1){const touch=e.touches[0];setPan({x:touch.clientX-dragStart.x,y:touch.clientY-dragStart.y});}},[isDragging,dragStart]);const handleTouchEnd=useCallback(()=>{setIsDragging(false);},[]);// Generate SVG path for links\nconst generateLinkPath=link=>{const sourceNode=sankeyData.nodes.find(n=>n.id===link.source);const targetNode=sankeyData.nodes.find(n=>n.id===link.target);if(!sourceNode||!targetNode)return'';const sourceX=(sourceNode.x||0)+(sourceNode.width||0);const sourceY=(sourceNode.y||0)+(sourceNode.height||0)/2;const targetX=targetNode.x||0;const targetY=(targetNode.y||0)+(targetNode.height||0)/2;const controlPoint1X=sourceX+(targetX-sourceX)*0.3;const controlPoint2X=sourceX+(targetX-sourceX)*0.7;return\"M \".concat(sourceX,\" \").concat(sourceY,\" C \").concat(controlPoint1X,\" \").concat(sourceY,\", \").concat(controlPoint2X,\" \").concat(targetY,\", \").concat(targetX,\" \").concat(targetY);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Money Flow Visualization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"See how your monthly income flows into expenses and savings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setZoom(Math.max(0.1,zoom-0.1)),className:\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded border\",children:\"Zoom Out\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setZoom(Math.min(3,zoom+0.1)),className:\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded border\",children:\"Zoom In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetView,className:\"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded border\",children:\"Reset View\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Zoom: \",Math.round(zoom*100),\"% | Scroll to zoom, drag to pan\",/*#__PURE__*/_jsxs(\"span\",{className:\"ml-4 text-xs\",children:[\"Scale: \",formatCurrency(totalOutgoing),\" = 100% height\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg overflow-hidden\",style:{height:'600px',cursor:isDragging?'grabbing':'grab'},onWheel:handleWheel,onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onTouchStart:handleTouchStart,onTouchMove:handleTouchMove,onTouchEnd:handleTouchEnd,children:/*#__PURE__*/_jsxs(\"svg\",{ref:svgRef,width:\"100%\",height:\"100%\",viewBox:\"\".concat(-pan.x,\" \").concat(-pan.y,\" \").concat(containerWidth/zoom,\" \").concat(containerHeight/zoom),style:{minWidth:containerWidth*zoom,minHeight:containerHeight*zoom,transform:\"scale(\".concat(zoom,\")\"),transformOrigin:'0 0'},children:[sankeyData.links.map((link,index)=>{// Calculate proportional stroke width based on total outgoing flows\nconst minStrokeWidth=2;const maxStrokeWidth=20;const proportionalStrokeWidth=Math.max(minStrokeWidth,link.value/totalOutgoing*maxStrokeWidth);return/*#__PURE__*/_jsx(\"path\",{d:generateLinkPath(link),stroke:link.color,strokeWidth:proportionalStrokeWidth,fill:\"none\",opacity:hoveredLink===index?1:0.7,className:\"transition-all duration-200 cursor-pointer\",onMouseEnter:()=>setHoveredLink(index),onMouseLeave:()=>setHoveredLink(null)},index);}),sankeyData.nodes.map(node=>/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"rect\",{x:node.x,y:node.y,width:node.width,height:node.height,fill:node.color,rx:6,className:\"transition-all duration-200 cursor-pointer shadow-sm\",style:{opacity:hoveredNode===node.id?0.9:1,transform:hoveredNode===node.id?'scale(1.05)':'scale(1)',filter:hoveredNode===node.id?'drop-shadow(0 4px 8px rgba(0,0,0,0.2))':'none'},onMouseEnter:()=>setHoveredNode(node.id),onMouseLeave:()=>setHoveredNode(null)}),/*#__PURE__*/_jsx(\"text\",{x:node.id==='income'?(node.x||0)-10:(node.x||0)+(node.width||0)+10,y:(node.y||0)+(node.height||0)/2,textAnchor:node.id==='income'?'end':'start',dominantBaseline:\"middle\",className:\"text-xs font-medium fill-gray-700\",children:node.name}),/*#__PURE__*/_jsx(\"text\",{x:node.id==='income'?(node.x||0)-10:(node.x||0)+(node.width||0)+10,y:(node.y||0)+(node.height||0)/2+15,textAnchor:node.id==='income'?'end':'start',dominantBaseline:\"middle\",className:\"text-xs fill-gray-500\",children:formatCurrency(node.value)})]},node.id))]})})]}),hoveredNode&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bg-gray-900 text-white px-3 py-2 rounded-lg shadow-lg text-sm z-10 pointer-events-none\",children:(()=>{const node=sankeyData.nodes.find(n=>n.id===hoveredNode);if(!node)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:node.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-300\",children:formatCurrency(node.value)}),node.id==='income'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400 mt-1\",children:[data.savingsPercentage.toFixed(1),\"% saved\"]})]});})()}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\",children:sankeyData.nodes.map(node=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded\",style:{backgroundColor:node.color}}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-600\",children:[node.name,\": \",formatCurrency(node.value)]})]},node.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:formatCurrency(data.monthlyNetIncome)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Income\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-red-600\",children:formatCurrency(data.totalExpenses)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Expenses\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:formatCurrency(data.savings)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Savings (\",data.savingsPercentage.toFixed(1),\"%)\"]})]})]})]});};export default SankeyChart;","map":{"version":3,"names":["React","useState","useMemo","useRef","useCallback","formatCurrency","jsx","_jsx","jsxs","_jsxs","SankeyChart","_ref","data","hoveredNode","setHoveredNode","hoveredLink","setHoveredLink","zoom","setZoom","pan","setPan","x","y","isDragging","setIsDragging","dragStart","setDragStart","svgRef","sankeyData","nodes","links","colors","income","savings","rent","utilities","groceries","restaurants","gas","medical","gym","travel","shopping","entertainment","miscellaneous","push","id","name","value","monthlyNetIncome","color","expenses","forEach","expense","index","nodeId","concat","categoryKey","category","toLowerCase","replace","amount","source","target","containerWidth","nodeWidth","nodeSpacing","totalOutgoing","reduce","sum","maxAmount","Math","max","minNodeHeight","maxNodeHeight","scaleFactor","rightNodesCount","filter","node","length","totalNodeHeights","proportionalHeight","totalSpacing","calculatedHeight","containerHeight","calculateLayout","leftNodes","rightNodes","incomeBarHeight","width","height","totalRightNodesHeight","startY","currentY","handleWheel","e","preventDefault","delta","deltaY","newZoom","min","handleMouseDown","button","clientX","clientY","handleMouseMove","handleMouseUp","resetView","handleTouchStart","touches","touch","handleTouchMove","handleTouchEnd","generateLinkPath","link","sourceNode","find","n","targetNode","sourceX","sourceY","targetX","targetY","controlPoint1X","controlPoint2X","className","children","onClick","round","style","cursor","onWheel","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","ref","viewBox","minWidth","minHeight","transform","transformOrigin","map","minStrokeWidth","maxStrokeWidth","proportionalStrokeWidth","d","stroke","strokeWidth","fill","opacity","onMouseEnter","rx","textAnchor","dominantBaseline","savingsPercentage","toFixed","backgroundColor","totalExpenses"],"sources":["/home/tanged/repo/Fortuna/src/components/SankeyChart.tsx"],"sourcesContent":["import React, { useState, useMemo, useRef, useCallback } from 'react';\nimport { ParsedFinancialData } from '../types/finance';\nimport { formatCurrency } from '../utils/csvParser';\n\ninterface SankeyChartProps {\n  data: ParsedFinancialData;\n}\n\ninterface SankeyNode {\n  id: string;\n  name: string;\n  value: number;\n  color: string;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n}\n\ninterface SankeyLink {\n  source: string;\n  target: string;\n  value: number;\n  color: string;\n}\n\ninterface SankeyData {\n  nodes: SankeyNode[];\n  links: SankeyLink[];\n}\n\nconst SankeyChart: React.FC<SankeyChartProps> = ({ data }) => {\n  const [hoveredNode, setHoveredNode] = useState<string | null>(null);\n  const [hoveredLink, setHoveredLink] = useState<number | null>(null);\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const svgRef = useRef<SVGSVGElement>(null);\n\n  // Generate Sankey data from financial data\n  const sankeyData = useMemo((): SankeyData => {\n    const nodes: SankeyNode[] = [];\n    const links: SankeyLink[] = [];\n\n    // Define colors for different categories\n    const colors = {\n      income: '#10B981', // Green\n      savings: '#3B82F6', // Blue\n      rent: '#EF4444', // Red\n      utilities: '#F59E0B', // Orange\n      groceries: '#8B5CF6', // Purple\n      restaurants: '#EC4899', // Pink\n      gas: '#6B7280', // Gray\n      medical: '#F97316', // Orange\n      gym: '#84CC16', // Lime\n      travel: '#06B6D4', // Cyan\n      shopping: '#F43F5E', // Rose\n      entertainment: '#A855F7', // Violet\n      miscellaneous: '#64748B', // Slate\n    };\n\n    // Add income node\n    nodes.push({\n      id: 'income',\n      name: 'Monthly Income',\n      value: data.monthlyNetIncome,\n      color: colors.income\n    });\n\n    // Add expense nodes and links\n    data.expenses.forEach((expense, index) => {\n      const nodeId = `expense-${index}`;\n      const categoryKey = expense.category.toLowerCase().replace(/[^a-z]/g, '');\n      \n      nodes.push({\n        id: nodeId,\n        name: expense.category,\n        value: expense.amount,\n        color: colors[categoryKey as keyof typeof colors] || colors.miscellaneous\n      });\n\n      links.push({\n        source: 'income',\n        target: nodeId,\n        value: expense.amount,\n        color: colors[categoryKey as keyof typeof colors] || colors.miscellaneous\n      });\n    });\n\n    // Add savings node and link\n    if (data.savings > 0) {\n      nodes.push({\n        id: 'savings',\n        name: 'Savings',\n        value: data.savings,\n        color: colors.savings\n      });\n\n      links.push({\n        source: 'income',\n        target: 'savings',\n        value: data.savings,\n        color: colors.savings\n      });\n    }\n\n    return { nodes, links };\n  }, [data]);\n\n  // Calculate layout dimensions - make responsive\n  const containerWidth = 900;\n  const nodeWidth = 25;\n  const nodeSpacing = 15;\n  \n  // Calculate proportional scaling - income bar should equal sum of all outgoing flows\n  const totalOutgoing = data.expenses.reduce((sum, expense) => sum + expense.amount, 0) + data.savings;\n  const maxAmount = Math.max(data.monthlyNetIncome, totalOutgoing);\n  const minNodeHeight = 20;\n  const maxNodeHeight = 80;\n  const scaleFactor = (maxNodeHeight - minNodeHeight) / maxAmount;\n  \n  // Calculate dynamic height based on proportional node sizes\n  const rightNodesCount = sankeyData.nodes.filter(node => node.id !== 'income').length;\n  const totalNodeHeights = sankeyData.nodes.reduce((sum, node) => {\n    const proportionalHeight = Math.max(minNodeHeight, node.value * scaleFactor);\n    return sum + proportionalHeight;\n  }, 0);\n  const totalSpacing = (rightNodesCount - 1) * nodeSpacing;\n  const calculatedHeight = Math.max(400, totalNodeHeights + totalSpacing + 100);\n  const containerHeight = calculatedHeight;\n\n  // Calculate node positions\n  const calculateLayout = () => {\n    const leftNodes = sankeyData.nodes.filter(node => node.id === 'income');\n    const rightNodes = sankeyData.nodes.filter(node => node.id !== 'income');\n\n    // Position income node on the left - height should equal total outgoing flows\n    leftNodes.forEach((node, index) => {\n      // Income bar height should equal the sum of all outgoing flows, not the income amount\n      const incomeBarHeight = Math.max(minNodeHeight, totalOutgoing * scaleFactor);\n      node.x = 80;\n      node.y = containerHeight / 2 - incomeBarHeight / 2;\n      node.width = nodeWidth;\n      node.height = incomeBarHeight;\n    });\n\n    // Position expense/savings nodes on the right with proportional heights\n    const totalRightNodesHeight = rightNodes.reduce((sum, node) => {\n      const proportionalHeight = Math.max(minNodeHeight, node.value * scaleFactor);\n      return sum + proportionalHeight;\n    }, 0);\n    \n    const totalSpacing = (rightNodes.length - 1) * nodeSpacing;\n    const startY = Math.max(50, (containerHeight - totalRightNodesHeight - totalSpacing) / 2);\n    \n    let currentY = startY;\n    rightNodes.forEach((node) => {\n      const proportionalHeight = Math.max(minNodeHeight, node.value * scaleFactor);\n      node.x = containerWidth - 180;\n      node.y = currentY;\n      node.width = nodeWidth;\n      node.height = proportionalHeight;\n      currentY += node.height + nodeSpacing;\n    });\n  };\n\n  calculateLayout();\n\n  // Pan and zoom handlers\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.1, Math.min(3, zoom * delta));\n    setZoom(newZoom);\n  }, [zoom]);\n\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    if (e.button === 0) { // Left mouse button\n      setIsDragging(true);\n      setDragStart({ x: e.clientX - pan.x, y: e.clientY - pan.y });\n    }\n  }, [pan]);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\n    if (isDragging) {\n      setPan({\n        x: e.clientX - dragStart.x,\n        y: e.clientY - dragStart.y\n      });\n    }\n  }, [isDragging, dragStart]);\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n\n  const resetView = useCallback(() => {\n    setZoom(1);\n    setPan({ x: 0, y: 0 });\n  }, []);\n\n  // Touch support for mobile\n  const handleTouchStart = useCallback((e: React.TouchEvent) => {\n    if (e.touches.length === 1) {\n      const touch = e.touches[0];\n      setIsDragging(true);\n      setDragStart({ x: touch.clientX - pan.x, y: touch.clientY - pan.y });\n    }\n  }, [pan]);\n\n  const handleTouchMove = useCallback((e: React.TouchEvent) => {\n    if (isDragging && e.touches.length === 1) {\n      const touch = e.touches[0];\n      setPan({\n        x: touch.clientX - dragStart.x,\n        y: touch.clientY - dragStart.y\n      });\n    }\n  }, [isDragging, dragStart]);\n\n  const handleTouchEnd = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n\n  // Generate SVG path for links\n  const generateLinkPath = (link: SankeyLink): string => {\n    const sourceNode = sankeyData.nodes.find(n => n.id === link.source);\n    const targetNode = sankeyData.nodes.find(n => n.id === link.target);\n    \n    if (!sourceNode || !targetNode) return '';\n\n    const sourceX = (sourceNode.x || 0) + (sourceNode.width || 0);\n    const sourceY = (sourceNode.y || 0) + (sourceNode.height || 0) / 2;\n    const targetX = targetNode.x || 0;\n    const targetY = (targetNode.y || 0) + (targetNode.height || 0) / 2;\n\n    const controlPoint1X = sourceX + (targetX - sourceX) * 0.3;\n    const controlPoint2X = sourceX + (targetX - sourceX) * 0.7;\n\n    return `M ${sourceX} ${sourceY} C ${controlPoint1X} ${sourceY}, ${controlPoint2X} ${targetY}, ${targetX} ${targetY}`;\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative\">\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Money Flow Visualization\n        </h3>\n        <p className=\"text-sm text-gray-600\">\n          See how your monthly income flows into expenses and savings\n        </p>\n      </div>\n\n      <div className=\"relative\">\n        {/* Controls */}\n        <div className=\"mb-4 flex justify-between items-center\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setZoom(Math.max(0.1, zoom - 0.1))}\n              className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded border\"\n            >\n              Zoom Out\n            </button>\n            <button\n              onClick={() => setZoom(Math.min(3, zoom + 0.1))}\n              className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded border\"\n            >\n              Zoom In\n            </button>\n            <button\n              onClick={resetView}\n              className=\"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded border\"\n            >\n              Reset View\n            </button>\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            Zoom: {Math.round(zoom * 100)}% | Scroll to zoom, drag to pan\n            <span className=\"ml-4 text-xs\">\n              Scale: {formatCurrency(totalOutgoing)} = 100% height\n            </span>\n          </div>\n        </div>\n\n        {/* Chart Container */}\n        <div \n          className=\"border border-gray-200 rounded-lg overflow-hidden\"\n          style={{ height: '600px', cursor: isDragging ? 'grabbing' : 'grab' }}\n          onWheel={handleWheel}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseUp}\n          onTouchStart={handleTouchStart}\n          onTouchMove={handleTouchMove}\n          onTouchEnd={handleTouchEnd}\n        >\n          <svg\n            ref={svgRef}\n            width=\"100%\"\n            height=\"100%\"\n            viewBox={`${-pan.x} ${-pan.y} ${containerWidth / zoom} ${containerHeight / zoom}`}\n            style={{ \n              minWidth: containerWidth * zoom, \n              minHeight: containerHeight * zoom,\n              transform: `scale(${zoom})`,\n              transformOrigin: '0 0'\n            }}\n          >\n          {/* Render links */}\n          {sankeyData.links.map((link, index) => {\n            // Calculate proportional stroke width based on total outgoing flows\n            const minStrokeWidth = 2;\n            const maxStrokeWidth = 20;\n            const proportionalStrokeWidth = Math.max(minStrokeWidth, (link.value / totalOutgoing) * maxStrokeWidth);\n            \n            return (\n              <path\n                key={index}\n                d={generateLinkPath(link)}\n                stroke={link.color}\n                strokeWidth={proportionalStrokeWidth}\n                fill=\"none\"\n                opacity={hoveredLink === index ? 1 : 0.7}\n                className=\"transition-all duration-200 cursor-pointer\"\n                onMouseEnter={() => setHoveredLink(index)}\n                onMouseLeave={() => setHoveredLink(null)}\n              />\n            );\n          })}\n\n          {/* Render nodes */}\n          {sankeyData.nodes.map((node) => (\n            <g key={node.id}>\n              <rect\n                x={node.x}\n                y={node.y}\n                width={node.width}\n                height={node.height}\n                fill={node.color}\n                rx={6}\n                className=\"transition-all duration-200 cursor-pointer shadow-sm\"\n                style={{\n                  opacity: hoveredNode === node.id ? 0.9 : 1,\n                  transform: hoveredNode === node.id ? 'scale(1.05)' : 'scale(1)',\n                  filter: hoveredNode === node.id ? 'drop-shadow(0 4px 8px rgba(0,0,0,0.2))' : 'none'\n                }}\n                onMouseEnter={() => setHoveredNode(node.id)}\n                onMouseLeave={() => setHoveredNode(null)}\n              />\n              \n              {/* Node labels */}\n              <text\n                x={node.id === 'income' ? (node.x || 0) - 10 : (node.x || 0) + (node.width || 0) + 10}\n                y={(node.y || 0) + (node.height || 0) / 2}\n                textAnchor={node.id === 'income' ? 'end' : 'start'}\n                dominantBaseline=\"middle\"\n                className=\"text-xs font-medium fill-gray-700\"\n              >\n                {node.name}\n              </text>\n              \n              {/* Value labels */}\n              <text\n                x={node.id === 'income' ? (node.x || 0) - 10 : (node.x || 0) + (node.width || 0) + 10}\n                y={(node.y || 0) + (node.height || 0) / 2 + 15}\n                textAnchor={node.id === 'income' ? 'end' : 'start'}\n                dominantBaseline=\"middle\"\n                className=\"text-xs fill-gray-500\"\n              >\n                {formatCurrency(node.value)}\n              </text>\n            </g>\n          ))}\n          </svg>\n        </div>\n      </div>\n\n      {/* Tooltip */}\n      {hoveredNode && (\n        <div className=\"absolute bg-gray-900 text-white px-3 py-2 rounded-lg shadow-lg text-sm z-10 pointer-events-none\">\n          {(() => {\n            const node = sankeyData.nodes.find(n => n.id === hoveredNode);\n            if (!node) return null;\n            return (\n              <div>\n                <div className=\"font-semibold\">{node.name}</div>\n                <div className=\"text-gray-300\">{formatCurrency(node.value)}</div>\n                {node.id === 'income' && (\n                  <div className=\"text-xs text-gray-400 mt-1\">\n                    {data.savingsPercentage.toFixed(1)}% saved\n                  </div>\n                )}\n              </div>\n            );\n          })()}\n        </div>\n      )}\n\n      {/* Legend */}\n      <div className=\"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3\">\n        {sankeyData.nodes.map((node) => (\n          <div key={node.id} className=\"flex items-center space-x-2\">\n            <div\n              className=\"w-3 h-3 rounded\"\n              style={{ backgroundColor: node.color }}\n            />\n            <span className=\"text-xs text-gray-600\">\n              {node.name}: {formatCurrency(node.value)}\n            </span>\n          </div>\n        ))}\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg\">\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-green-600\">\n            {formatCurrency(data.monthlyNetIncome)}\n          </div>\n          <div className=\"text-sm text-gray-600\">Total Income</div>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-red-600\">\n            {formatCurrency(data.totalExpenses)}\n          </div>\n          <div className=\"text-sm text-gray-600\">Total Expenses</div>\n        </div>\n        <div className=\"text-center\">\n          <div className=\"text-2xl font-bold text-blue-600\">\n            {formatCurrency(data.savings)}\n          </div>\n          <div className=\"text-sm text-gray-600\">Savings ({data.savingsPercentage.toFixed(1)}%)</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SankeyChart;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,OAAO,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CAErE,OAASC,cAAc,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBA6BpD,KAAM,CAAAC,WAAuC,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACvD,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAgB,IAAI,CAAC,CACnE,KAAM,CAACc,WAAW,CAAEC,cAAc,CAAC,CAAGf,QAAQ,CAAgB,IAAI,CAAC,CACnE,KAAM,CAACgB,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACkB,GAAG,CAAEC,MAAM,CAAC,CAAGnB,QAAQ,CAAC,CAAEoB,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAAC,CAC9C,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,CAAEoB,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAAC,CAC1D,KAAM,CAAAK,MAAM,CAAGxB,MAAM,CAAgB,IAAI,CAAC,CAE1C;AACA,KAAM,CAAAyB,UAAU,CAAG1B,OAAO,CAAC,IAAkB,CAC3C,KAAM,CAAA2B,KAAmB,CAAG,EAAE,CAC9B,KAAM,CAAAC,KAAmB,CAAG,EAAE,CAE9B;AACA,KAAM,CAAAC,MAAM,CAAG,CACbC,MAAM,CAAE,SAAS,CAAE;AACnBC,OAAO,CAAE,SAAS,CAAE;AACpBC,IAAI,CAAE,SAAS,CAAE;AACjBC,SAAS,CAAE,SAAS,CAAE;AACtBC,SAAS,CAAE,SAAS,CAAE;AACtBC,WAAW,CAAE,SAAS,CAAE;AACxBC,GAAG,CAAE,SAAS,CAAE;AAChBC,OAAO,CAAE,SAAS,CAAE;AACpBC,GAAG,CAAE,SAAS,CAAE;AAChBC,MAAM,CAAE,SAAS,CAAE;AACnBC,QAAQ,CAAE,SAAS,CAAE;AACrBC,aAAa,CAAE,SAAS,CAAE;AAC1BC,aAAa,CAAE,SAAW;AAC5B,CAAC,CAED;AACAf,KAAK,CAACgB,IAAI,CAAC,CACTC,EAAE,CAAE,QAAQ,CACZC,IAAI,CAAE,gBAAgB,CACtBC,KAAK,CAAEpC,IAAI,CAACqC,gBAAgB,CAC5BC,KAAK,CAAEnB,MAAM,CAACC,MAChB,CAAC,CAAC,CAEF;AACApB,IAAI,CAACuC,QAAQ,CAACC,OAAO,CAAC,CAACC,OAAO,CAAEC,KAAK,GAAK,CACxC,KAAM,CAAAC,MAAM,YAAAC,MAAA,CAAcF,KAAK,CAAE,CACjC,KAAM,CAAAG,WAAW,CAAGJ,OAAO,CAACK,QAAQ,CAACC,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CAEzE/B,KAAK,CAACgB,IAAI,CAAC,CACTC,EAAE,CAAES,MAAM,CACVR,IAAI,CAAEM,OAAO,CAACK,QAAQ,CACtBV,KAAK,CAAEK,OAAO,CAACQ,MAAM,CACrBX,KAAK,CAAEnB,MAAM,CAAC0B,WAAW,CAAwB,EAAI1B,MAAM,CAACa,aAC9D,CAAC,CAAC,CAEFd,KAAK,CAACe,IAAI,CAAC,CACTiB,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAER,MAAM,CACdP,KAAK,CAAEK,OAAO,CAACQ,MAAM,CACrBX,KAAK,CAAEnB,MAAM,CAAC0B,WAAW,CAAwB,EAAI1B,MAAM,CAACa,aAC9D,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF;AACA,GAAIhC,IAAI,CAACqB,OAAO,CAAG,CAAC,CAAE,CACpBJ,KAAK,CAACgB,IAAI,CAAC,CACTC,EAAE,CAAE,SAAS,CACbC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAEpC,IAAI,CAACqB,OAAO,CACnBiB,KAAK,CAAEnB,MAAM,CAACE,OAChB,CAAC,CAAC,CAEFH,KAAK,CAACe,IAAI,CAAC,CACTiB,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAE,SAAS,CACjBf,KAAK,CAAEpC,IAAI,CAACqB,OAAO,CACnBiB,KAAK,CAAEnB,MAAM,CAACE,OAChB,CAAC,CAAC,CACJ,CAEA,MAAO,CAAEJ,KAAK,CAAEC,KAAM,CAAC,CACzB,CAAC,CAAE,CAAClB,IAAI,CAAC,CAAC,CAEV;AACA,KAAM,CAAAoD,cAAc,CAAG,GAAG,CAC1B,KAAM,CAAAC,SAAS,CAAG,EAAE,CACpB,KAAM,CAAAC,WAAW,CAAG,EAAE,CAEtB;AACA,KAAM,CAAAC,aAAa,CAAGvD,IAAI,CAACuC,QAAQ,CAACiB,MAAM,CAAC,CAACC,GAAG,CAAEhB,OAAO,GAAKgB,GAAG,CAAGhB,OAAO,CAACQ,MAAM,CAAE,CAAC,CAAC,CAAGjD,IAAI,CAACqB,OAAO,CACpG,KAAM,CAAAqC,SAAS,CAAGC,IAAI,CAACC,GAAG,CAAC5D,IAAI,CAACqC,gBAAgB,CAAEkB,aAAa,CAAC,CAChE,KAAM,CAAAM,aAAa,CAAG,EAAE,CACxB,KAAM,CAAAC,aAAa,CAAG,EAAE,CACxB,KAAM,CAAAC,WAAW,CAAG,CAACD,aAAa,CAAGD,aAAa,EAAIH,SAAS,CAE/D;AACA,KAAM,CAAAM,eAAe,CAAGhD,UAAU,CAACC,KAAK,CAACgD,MAAM,CAACC,IAAI,EAAIA,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAC,CAACiC,MAAM,CACpF,KAAM,CAAAC,gBAAgB,CAAGpD,UAAU,CAACC,KAAK,CAACuC,MAAM,CAAC,CAACC,GAAG,CAAES,IAAI,GAAK,CAC9D,KAAM,CAAAG,kBAAkB,CAAGV,IAAI,CAACC,GAAG,CAACC,aAAa,CAAEK,IAAI,CAAC9B,KAAK,CAAG2B,WAAW,CAAC,CAC5E,MAAO,CAAAN,GAAG,CAAGY,kBAAkB,CACjC,CAAC,CAAE,CAAC,CAAC,CACL,KAAM,CAAAC,YAAY,CAAG,CAACN,eAAe,CAAG,CAAC,EAAIV,WAAW,CACxD,KAAM,CAAAiB,gBAAgB,CAAGZ,IAAI,CAACC,GAAG,CAAC,GAAG,CAAEQ,gBAAgB,CAAGE,YAAY,CAAG,GAAG,CAAC,CAC7E,KAAM,CAAAE,eAAe,CAAGD,gBAAgB,CAExC;AACA,KAAM,CAAAE,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,SAAS,CAAG1D,UAAU,CAACC,KAAK,CAACgD,MAAM,CAACC,IAAI,EAAIA,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAC,CACvE,KAAM,CAAAyC,UAAU,CAAG3D,UAAU,CAACC,KAAK,CAACgD,MAAM,CAACC,IAAI,EAAIA,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAC,CAExE;AACAwC,SAAS,CAAClC,OAAO,CAAC,CAAC0B,IAAI,CAAExB,KAAK,GAAK,CACjC;AACA,KAAM,CAAAkC,eAAe,CAAGjB,IAAI,CAACC,GAAG,CAACC,aAAa,CAAEN,aAAa,CAAGQ,WAAW,CAAC,CAC5EG,IAAI,CAACzD,CAAC,CAAG,EAAE,CACXyD,IAAI,CAACxD,CAAC,CAAG8D,eAAe,CAAG,CAAC,CAAGI,eAAe,CAAG,CAAC,CAClDV,IAAI,CAACW,KAAK,CAAGxB,SAAS,CACtBa,IAAI,CAACY,MAAM,CAAGF,eAAe,CAC/B,CAAC,CAAC,CAEF;AACA,KAAM,CAAAG,qBAAqB,CAAGJ,UAAU,CAACnB,MAAM,CAAC,CAACC,GAAG,CAAES,IAAI,GAAK,CAC7D,KAAM,CAAAG,kBAAkB,CAAGV,IAAI,CAACC,GAAG,CAACC,aAAa,CAAEK,IAAI,CAAC9B,KAAK,CAAG2B,WAAW,CAAC,CAC5E,MAAO,CAAAN,GAAG,CAAGY,kBAAkB,CACjC,CAAC,CAAE,CAAC,CAAC,CAEL,KAAM,CAAAC,YAAY,CAAG,CAACK,UAAU,CAACR,MAAM,CAAG,CAAC,EAAIb,WAAW,CAC1D,KAAM,CAAA0B,MAAM,CAAGrB,IAAI,CAACC,GAAG,CAAC,EAAE,CAAE,CAACY,eAAe,CAAGO,qBAAqB,CAAGT,YAAY,EAAI,CAAC,CAAC,CAEzF,GAAI,CAAAW,QAAQ,CAAGD,MAAM,CACrBL,UAAU,CAACnC,OAAO,CAAE0B,IAAI,EAAK,CAC3B,KAAM,CAAAG,kBAAkB,CAAGV,IAAI,CAACC,GAAG,CAACC,aAAa,CAAEK,IAAI,CAAC9B,KAAK,CAAG2B,WAAW,CAAC,CAC5EG,IAAI,CAACzD,CAAC,CAAG2C,cAAc,CAAG,GAAG,CAC7Bc,IAAI,CAACxD,CAAC,CAAGuE,QAAQ,CACjBf,IAAI,CAACW,KAAK,CAAGxB,SAAS,CACtBa,IAAI,CAACY,MAAM,CAAGT,kBAAkB,CAChCY,QAAQ,EAAIf,IAAI,CAACY,MAAM,CAAGxB,WAAW,CACvC,CAAC,CAAC,CACJ,CAAC,CAEDmB,eAAe,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAS,WAAW,CAAG1F,WAAW,CAAE2F,CAAmB,EAAK,CACvDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,KAAK,CAAGF,CAAC,CAACG,MAAM,CAAG,CAAC,CAAG,GAAG,CAAG,GAAG,CACtC,KAAM,CAAAC,OAAO,CAAG5B,IAAI,CAACC,GAAG,CAAC,GAAG,CAAED,IAAI,CAAC6B,GAAG,CAAC,CAAC,CAAEnF,IAAI,CAAGgF,KAAK,CAAC,CAAC,CACxD/E,OAAO,CAACiF,OAAO,CAAC,CAClB,CAAC,CAAE,CAAClF,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAoF,eAAe,CAAGjG,WAAW,CAAE2F,CAAmB,EAAK,CAC3D,GAAIA,CAAC,CAACO,MAAM,GAAK,CAAC,CAAE,CAAE;AACpB9E,aAAa,CAAC,IAAI,CAAC,CACnBE,YAAY,CAAC,CAAEL,CAAC,CAAE0E,CAAC,CAACQ,OAAO,CAAGpF,GAAG,CAACE,CAAC,CAAEC,CAAC,CAAEyE,CAAC,CAACS,OAAO,CAAGrF,GAAG,CAACG,CAAE,CAAC,CAAC,CAC9D,CACF,CAAC,CAAE,CAACH,GAAG,CAAC,CAAC,CAET,KAAM,CAAAsF,eAAe,CAAGrG,WAAW,CAAE2F,CAAmB,EAAK,CAC3D,GAAIxE,UAAU,CAAE,CACdH,MAAM,CAAC,CACLC,CAAC,CAAE0E,CAAC,CAACQ,OAAO,CAAG9E,SAAS,CAACJ,CAAC,CAC1BC,CAAC,CAAEyE,CAAC,CAACS,OAAO,CAAG/E,SAAS,CAACH,CAC3B,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACC,UAAU,CAAEE,SAAS,CAAC,CAAC,CAE3B,KAAM,CAAAiF,aAAa,CAAGtG,WAAW,CAAC,IAAM,CACtCoB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmF,SAAS,CAAGvG,WAAW,CAAC,IAAM,CAClCc,OAAO,CAAC,CAAC,CAAC,CACVE,MAAM,CAAC,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAAC,CACxB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAsF,gBAAgB,CAAGxG,WAAW,CAAE2F,CAAmB,EAAK,CAC5D,GAAIA,CAAC,CAACc,OAAO,CAAC9B,MAAM,GAAK,CAAC,CAAE,CAC1B,KAAM,CAAA+B,KAAK,CAAGf,CAAC,CAACc,OAAO,CAAC,CAAC,CAAC,CAC1BrF,aAAa,CAAC,IAAI,CAAC,CACnBE,YAAY,CAAC,CAAEL,CAAC,CAAEyF,KAAK,CAACP,OAAO,CAAGpF,GAAG,CAACE,CAAC,CAAEC,CAAC,CAAEwF,KAAK,CAACN,OAAO,CAAGrF,GAAG,CAACG,CAAE,CAAC,CAAC,CACtE,CACF,CAAC,CAAE,CAACH,GAAG,CAAC,CAAC,CAET,KAAM,CAAA4F,eAAe,CAAG3G,WAAW,CAAE2F,CAAmB,EAAK,CAC3D,GAAIxE,UAAU,EAAIwE,CAAC,CAACc,OAAO,CAAC9B,MAAM,GAAK,CAAC,CAAE,CACxC,KAAM,CAAA+B,KAAK,CAAGf,CAAC,CAACc,OAAO,CAAC,CAAC,CAAC,CAC1BzF,MAAM,CAAC,CACLC,CAAC,CAAEyF,KAAK,CAACP,OAAO,CAAG9E,SAAS,CAACJ,CAAC,CAC9BC,CAAC,CAAEwF,KAAK,CAACN,OAAO,CAAG/E,SAAS,CAACH,CAC/B,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACC,UAAU,CAAEE,SAAS,CAAC,CAAC,CAE3B,KAAM,CAAAuF,cAAc,CAAG5G,WAAW,CAAC,IAAM,CACvCoB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAyF,gBAAgB,CAAIC,IAAgB,EAAa,CACrD,KAAM,CAAAC,UAAU,CAAGvF,UAAU,CAACC,KAAK,CAACuF,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACvE,EAAE,GAAKoE,IAAI,CAACpD,MAAM,CAAC,CACnE,KAAM,CAAAwD,UAAU,CAAG1F,UAAU,CAACC,KAAK,CAACuF,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACvE,EAAE,GAAKoE,IAAI,CAACnD,MAAM,CAAC,CAEnE,GAAI,CAACoD,UAAU,EAAI,CAACG,UAAU,CAAE,MAAO,EAAE,CAEzC,KAAM,CAAAC,OAAO,CAAG,CAACJ,UAAU,CAAC9F,CAAC,EAAI,CAAC,GAAK8F,UAAU,CAAC1B,KAAK,EAAI,CAAC,CAAC,CAC7D,KAAM,CAAA+B,OAAO,CAAG,CAACL,UAAU,CAAC7F,CAAC,EAAI,CAAC,EAAI,CAAC6F,UAAU,CAACzB,MAAM,EAAI,CAAC,EAAI,CAAC,CAClE,KAAM,CAAA+B,OAAO,CAAGH,UAAU,CAACjG,CAAC,EAAI,CAAC,CACjC,KAAM,CAAAqG,OAAO,CAAG,CAACJ,UAAU,CAAChG,CAAC,EAAI,CAAC,EAAI,CAACgG,UAAU,CAAC5B,MAAM,EAAI,CAAC,EAAI,CAAC,CAElE,KAAM,CAAAiC,cAAc,CAAGJ,OAAO,CAAG,CAACE,OAAO,CAAGF,OAAO,EAAI,GAAG,CAC1D,KAAM,CAAAK,cAAc,CAAGL,OAAO,CAAG,CAACE,OAAO,CAAGF,OAAO,EAAI,GAAG,CAE1D,WAAA/D,MAAA,CAAY+D,OAAO,MAAA/D,MAAA,CAAIgE,OAAO,QAAAhE,MAAA,CAAMmE,cAAc,MAAAnE,MAAA,CAAIgE,OAAO,OAAAhE,MAAA,CAAKoE,cAAc,MAAApE,MAAA,CAAIkE,OAAO,OAAAlE,MAAA,CAAKiE,OAAO,MAAAjE,MAAA,CAAIkE,OAAO,EACpH,CAAC,CAED,mBACEjH,KAAA,QAAKoH,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChFrH,KAAA,QAAKoH,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvH,IAAA,OAAIsH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,0BAEzD,CAAI,CAAC,cACLvH,IAAA,MAAGsH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,6DAErC,CAAG,CAAC,EACD,CAAC,cAENrH,KAAA,QAAKoH,SAAS,CAAC,UAAU,CAAAC,QAAA,eAEvBrH,KAAA,QAAKoH,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDrH,KAAA,QAAKoH,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BvH,IAAA,WACEwH,OAAO,CAAEA,CAAA,GAAM7G,OAAO,CAACqD,IAAI,CAACC,GAAG,CAAC,GAAG,CAAEvD,IAAI,CAAG,GAAG,CAAC,CAAE,CAClD4G,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAC3E,UAED,CAAQ,CAAC,cACTvH,IAAA,WACEwH,OAAO,CAAEA,CAAA,GAAM7G,OAAO,CAACqD,IAAI,CAAC6B,GAAG,CAAC,CAAC,CAAEnF,IAAI,CAAG,GAAG,CAAC,CAAE,CAChD4G,SAAS,CAAC,gEAAgE,CAAAC,QAAA,CAC3E,SAED,CAAQ,CAAC,cACTvH,IAAA,WACEwH,OAAO,CAAEpB,SAAU,CACnBkB,SAAS,CAAC,8EAA8E,CAAAC,QAAA,CACzF,YAED,CAAQ,CAAC,EACN,CAAC,cACNrH,KAAA,QAAKoH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,QAC/B,CAACvD,IAAI,CAACyD,KAAK,CAAC/G,IAAI,CAAG,GAAG,CAAC,CAAC,iCAC9B,cAAAR,KAAA,SAAMoH,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,SACtB,CAACzH,cAAc,CAAC8D,aAAa,CAAC,CAAC,gBACxC,EAAM,CAAC,EACJ,CAAC,EACH,CAAC,cAGN5D,IAAA,QACEsH,SAAS,CAAC,mDAAmD,CAC7DI,KAAK,CAAE,CAAEvC,MAAM,CAAE,OAAO,CAAEwC,MAAM,CAAE3G,UAAU,CAAG,UAAU,CAAG,MAAO,CAAE,CACrE4G,OAAO,CAAErC,WAAY,CACrBsC,WAAW,CAAE/B,eAAgB,CAC7BgC,WAAW,CAAE5B,eAAgB,CAC7B6B,SAAS,CAAE5B,aAAc,CACzB6B,YAAY,CAAE7B,aAAc,CAC5B8B,YAAY,CAAE5B,gBAAiB,CAC/B6B,WAAW,CAAE1B,eAAgB,CAC7B2B,UAAU,CAAE1B,cAAe,CAAAc,QAAA,cAE3BrH,KAAA,QACEkI,GAAG,CAAEhH,MAAO,CACZ8D,KAAK,CAAC,MAAM,CACZC,MAAM,CAAC,MAAM,CACbkD,OAAO,IAAApF,MAAA,CAAK,CAACrC,GAAG,CAACE,CAAC,MAAAmC,MAAA,CAAI,CAACrC,GAAG,CAACG,CAAC,MAAAkC,MAAA,CAAIQ,cAAc,CAAG/C,IAAI,MAAAuC,MAAA,CAAI4B,eAAe,CAAGnE,IAAI,CAAG,CAClFgH,KAAK,CAAE,CACLY,QAAQ,CAAE7E,cAAc,CAAG/C,IAAI,CAC/B6H,SAAS,CAAE1D,eAAe,CAAGnE,IAAI,CACjC8H,SAAS,UAAAvF,MAAA,CAAWvC,IAAI,KAAG,CAC3B+H,eAAe,CAAE,KACnB,CAAE,CAAAlB,QAAA,EAGHlG,UAAU,CAACE,KAAK,CAACmH,GAAG,CAAC,CAAC/B,IAAI,CAAE5D,KAAK,GAAK,CACrC;AACA,KAAM,CAAA4F,cAAc,CAAG,CAAC,CACxB,KAAM,CAAAC,cAAc,CAAG,EAAE,CACzB,KAAM,CAAAC,uBAAuB,CAAG7E,IAAI,CAACC,GAAG,CAAC0E,cAAc,CAAGhC,IAAI,CAAClE,KAAK,CAAGmB,aAAa,CAAIgF,cAAc,CAAC,CAEvG,mBACE5I,IAAA,SAEE8I,CAAC,CAAEpC,gBAAgB,CAACC,IAAI,CAAE,CAC1BoC,MAAM,CAAEpC,IAAI,CAAChE,KAAM,CACnBqG,WAAW,CAAEH,uBAAwB,CACrCI,IAAI,CAAC,MAAM,CACXC,OAAO,CAAE1I,WAAW,GAAKuC,KAAK,CAAG,CAAC,CAAG,GAAI,CACzCuE,SAAS,CAAC,4CAA4C,CACtD6B,YAAY,CAAEA,CAAA,GAAM1I,cAAc,CAACsC,KAAK,CAAE,CAC1CiF,YAAY,CAAEA,CAAA,GAAMvH,cAAc,CAAC,IAAI,CAAE,EARpCsC,KASN,CAAC,CAEN,CAAC,CAAC,CAGD1B,UAAU,CAACC,KAAK,CAACoH,GAAG,CAAEnE,IAAI,eACzBrE,KAAA,MAAAqH,QAAA,eACEvH,IAAA,SACEc,CAAC,CAAEyD,IAAI,CAACzD,CAAE,CACVC,CAAC,CAAEwD,IAAI,CAACxD,CAAE,CACVmE,KAAK,CAAEX,IAAI,CAACW,KAAM,CAClBC,MAAM,CAAEZ,IAAI,CAACY,MAAO,CACpB8D,IAAI,CAAE1E,IAAI,CAAC5B,KAAM,CACjByG,EAAE,CAAE,CAAE,CACN9B,SAAS,CAAC,sDAAsD,CAChEI,KAAK,CAAE,CACLwB,OAAO,CAAE5I,WAAW,GAAKiE,IAAI,CAAChC,EAAE,CAAG,GAAG,CAAG,CAAC,CAC1CiG,SAAS,CAAElI,WAAW,GAAKiE,IAAI,CAAChC,EAAE,CAAG,aAAa,CAAG,UAAU,CAC/D+B,MAAM,CAAEhE,WAAW,GAAKiE,IAAI,CAAChC,EAAE,CAAG,wCAAwC,CAAG,MAC/E,CAAE,CACF4G,YAAY,CAAEA,CAAA,GAAM5I,cAAc,CAACgE,IAAI,CAAChC,EAAE,CAAE,CAC5CyF,YAAY,CAAEA,CAAA,GAAMzH,cAAc,CAAC,IAAI,CAAE,CAC1C,CAAC,cAGFP,IAAA,SACEc,CAAC,CAAEyD,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAG,CAACgC,IAAI,CAACzD,CAAC,EAAI,CAAC,EAAI,EAAE,CAAG,CAACyD,IAAI,CAACzD,CAAC,EAAI,CAAC,GAAKyD,IAAI,CAACW,KAAK,EAAI,CAAC,CAAC,CAAG,EAAG,CACtFnE,CAAC,CAAE,CAACwD,IAAI,CAACxD,CAAC,EAAI,CAAC,EAAI,CAACwD,IAAI,CAACY,MAAM,EAAI,CAAC,EAAI,CAAE,CAC1CkE,UAAU,CAAE9E,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAG,KAAK,CAAG,OAAQ,CACnD+G,gBAAgB,CAAC,QAAQ,CACzBhC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAE5ChD,IAAI,CAAC/B,IAAI,CACN,CAAC,cAGPxC,IAAA,SACEc,CAAC,CAAEyD,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAG,CAACgC,IAAI,CAACzD,CAAC,EAAI,CAAC,EAAI,EAAE,CAAG,CAACyD,IAAI,CAACzD,CAAC,EAAI,CAAC,GAAKyD,IAAI,CAACW,KAAK,EAAI,CAAC,CAAC,CAAG,EAAG,CACtFnE,CAAC,CAAE,CAACwD,IAAI,CAACxD,CAAC,EAAI,CAAC,EAAI,CAACwD,IAAI,CAACY,MAAM,EAAI,CAAC,EAAI,CAAC,CAAG,EAAG,CAC/CkE,UAAU,CAAE9E,IAAI,CAAChC,EAAE,GAAK,QAAQ,CAAG,KAAK,CAAG,OAAQ,CACnD+G,gBAAgB,CAAC,QAAQ,CACzBhC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAEhCzH,cAAc,CAACyE,IAAI,CAAC9B,KAAK,CAAC,CACvB,CAAC,GAtCD8B,IAAI,CAAChC,EAuCV,CACJ,CAAC,EACG,CAAC,CACH,CAAC,EACH,CAAC,CAGLjC,WAAW,eACVN,IAAA,QAAKsH,SAAS,CAAC,iGAAiG,CAAAC,QAAA,CAC7G,CAAC,IAAM,CACN,KAAM,CAAAhD,IAAI,CAAGlD,UAAU,CAACC,KAAK,CAACuF,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACvE,EAAE,GAAKjC,WAAW,CAAC,CAC7D,GAAI,CAACiE,IAAI,CAAE,MAAO,KAAI,CACtB,mBACErE,KAAA,QAAAqH,QAAA,eACEvH,IAAA,QAAKsH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEhD,IAAI,CAAC/B,IAAI,CAAM,CAAC,cAChDxC,IAAA,QAAKsH,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzH,cAAc,CAACyE,IAAI,CAAC9B,KAAK,CAAC,CAAM,CAAC,CAChE8B,IAAI,CAAChC,EAAE,GAAK,QAAQ,eACnBrC,KAAA,QAAKoH,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EACxClH,IAAI,CAACkJ,iBAAiB,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,SACrC,EAAK,CACN,EACE,CAAC,CAEV,CAAC,EAAE,CAAC,CACD,CACN,cAGDxJ,IAAA,QAAKsH,SAAS,CAAC,2DAA2D,CAAAC,QAAA,CACvElG,UAAU,CAACC,KAAK,CAACoH,GAAG,CAAEnE,IAAI,eACzBrE,KAAA,QAAmBoH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACxDvH,IAAA,QACEsH,SAAS,CAAC,iBAAiB,CAC3BI,KAAK,CAAE,CAAE+B,eAAe,CAAElF,IAAI,CAAC5B,KAAM,CAAE,CACxC,CAAC,cACFzC,KAAA,SAAMoH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACpChD,IAAI,CAAC/B,IAAI,CAAC,IAAE,CAAC1C,cAAc,CAACyE,IAAI,CAAC9B,KAAK,CAAC,EACpC,CAAC,GAPC8B,IAAI,CAAChC,EAQV,CACN,CAAC,CACC,CAAC,cAGNrC,KAAA,QAAKoH,SAAS,CAAC,sEAAsE,CAAAC,QAAA,eACnFrH,KAAA,QAAKoH,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BvH,IAAA,QAAKsH,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAC/CzH,cAAc,CAACO,IAAI,CAACqC,gBAAgB,CAAC,CACnC,CAAC,cACN1C,IAAA,QAAKsH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,cAAY,CAAK,CAAC,EACtD,CAAC,cACNrH,KAAA,QAAKoH,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BvH,IAAA,QAAKsH,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC7CzH,cAAc,CAACO,IAAI,CAACqJ,aAAa,CAAC,CAChC,CAAC,cACN1J,IAAA,QAAKsH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gBAAc,CAAK,CAAC,EACxD,CAAC,cACNrH,KAAA,QAAKoH,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BvH,IAAA,QAAKsH,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC9CzH,cAAc,CAACO,IAAI,CAACqB,OAAO,CAAC,CAC1B,CAAC,cACNxB,KAAA,QAAKoH,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,WAAS,CAAClH,IAAI,CAACkJ,iBAAiB,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAE,EAAK,CAAC,EACxF,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAArJ,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}